{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/VueBackpropagationExercise.vue?1f2c","webpack:///./src/components/VueBackpropagationExercise.vue?1bb1","webpack:///./src/App.vue?c0ba","webpack:///./src/components/VueBackpropagationExercise.vue?2d64","webpack:///./src/geometry.ts","webpack:///./src/utils.ts","webpack:///./src/interfaces.ts","webpack:///./src/translations.ts","webpack:///./src/components/VueBackpropagationExercise.vue?6bd8","webpack:///./src/components/VueBackpropagationExercise.vue?fef8","webpack:///./src/components/VueBackpropagationExercise.vue","webpack:///./src/neurons.ts","webpack:///./src/examples/example2.ts","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/main.ts","webpack:///./src/App.vue?272e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","example","netTree","netFuncTex","errFuncTex","errorHandler","handleSubmit","staticRenderFns","staticClass","_v","_s","tl","_m","on","$event","toggleStep","currentStep","class","debug","feedforward","root","debugBP","_e","directives","rawName","expression","domProps","wowInstructions","weightSliderValue","target","weightChange","formatted","newEditableWeightValue","toFixed","totalNetError","errorPrecisionDigits","costChange","disabled","submitted","submit","proceed","proceedButtonText","bezierPoint","percent","p1","cp1","cp2","p2","b1","b2","b3","b4","pos","x","y","linePointAt","center","source","dest","diagonal","path","formatString","insertions","replace","match","number","roundNd","Math","round","pow","round2d","fixedNd","before","after","repeat","parseFloatStrict","test","Number","NaN","Step","Language","translations","Map","DE","EN","netFunction","errFunction","tip","invalidNumber","missingValues","wrongFFValue","change","to","yieldsError","step","expected","nextStep","thanks","whywow","wowinstructions","defaultErrFunc","observed","ffOverrides","netErrorCausedValue","initialNetError","FF","treeData","func","nodeId","accumulate","reduce","acc","elem","bpValue","children","tree","d3","size","height","width","svg","treeMap","nodes","descendants","links","forEach","undefined","ffValue","inputId","netErrorHandler","out","expectedOut","val","changes","filter","editable","map","ffInput","document","getElementById","parsedValue","isNaN","newValue","weightSliderRelativeRange","toString","currentFFValue","netOut","updateError","lang","correct","BP","bpInput","parent","invalid","wrong","tolerance","abs","id","alert","values","validFFInputValues","validBPInputValues","validation","submissionValidator","collectBPInputValues","message","valid","WOW","netFuncElement","render","throwOnError","errFuncElement","errorFunc","checkUserNumberInput","input","enteredValue","roundedValue","append","attr","padding","style","selectAll","join","arrowSize","circleRadius","arrowColor","build","greenColor","redColor","hidden","orientForStep","URL","location","href","quiet","ffInputValues","setProperty","totalErrorText","errorTex","toggleInputsForStep","toggleArrowsForStep","texPlaceholders","getElementsByClassName","maxChildX","max","factorW","depth","circleNodes","dd","lastNode","errorHeight","errorWidth","enter","html","nodeEnter","origin","centeredChildPoint","circleOutlineColor","mathFuncHtml","renderToString","animationDelay","animationDuration","animationPreshootFactor","transition","delay","duration","select","circleColor","link","linkEnter","insert","inputWidth","inputHeight","inputPlaceholder","spacing","ffInputsEnter","isEditable","mathEditableHtml","costChangePercent","default","component","errorFunction","addFunc","multFunc","leafFunc","powThreeQuarterFunc","TypeError","console","log","components","VueBackpropagationExercise","config","productionTip","h","$mount"],"mappings":"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","file":"js/app.9614d0ba.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBackpropagationExercise.vue?vue&type=style&index=0&id=0852a1fd&scoped=true&lang=sass&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBackpropagationExercise.vue?vue&type=style&index=0&id=0852a1fd&scoped=true&lang=sass&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBackpropagationExercise.vue?vue&type=style&index=1&lang=sass&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBackpropagationExercise.vue?vue&type=style&index=1&lang=sass&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('vue-backpropagation-exercise',{attrs:{\"data\":_vm.example.netTree,\"func\":_vm.example.netFuncTex,\"height\":600,\"width\":700,\"expectedOut\":5,\"errorPrecisionDigits\":5,\"errorFunc\":_vm.example.errFuncTex,\"netErrorHandler\":_vm.example.errorHandler,\"debug\":false,\"submissionValidator\":_vm.handleSubmit,\"editable\":\"w_1\",\"lang\":\"en\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"backpropexercise\"},[_c('div',{staticClass:\"top-controls controls\"},[_c('p',{staticClass:\"important\"},[_vm._v(\" \"+_vm._s(_vm.tl(\"tip\"))+\" \")]),_c('table',{staticClass:\"net-functions\"},[_c('tr',[_c('td',[_vm._v(_vm._s(_vm.tl(\"netFunction\")))]),_c('td',[_vm._v(_vm._s(_vm.tl(\"errFunction\")))])]),_vm._m(0)]),_c('ul',{staticClass:\"legend\",on:{\"click\":function($event){return _vm.toggleStep(_vm.currentStep)}}},[_c('li',{class:{ 'inactive-step': this.currentStep == 'BP' }},[_c('span',{staticClass:\"ff bubble\"}),_vm._v(\" Feedforward \"+_vm._s(_vm.tl(\"step\"))+\" \")]),_c('li',{class:{ 'inactive-step': this.currentStep != 'BP' }},[_c('span',{staticClass:\"bp bubble\"}),_vm._v(\" Backpropagation \"+_vm._s(_vm.tl(\"step\"))+\" \")])])]),_c('div',{staticClass:\"computation-graph\"}),_c('div',{staticClass:\"bottom-controls controls\"},[(_vm.debug == true)?_c('div',[_c('span',{staticClass:\"debug-button\",on:{\"click\":function($event){return _vm.feedforward(_vm.root)}}},[_vm._v(\"Debug: Add FF\")]),_c('span',{staticClass:\"debug-button\",on:{\"click\":function($event){return _vm.debugBP(false)}}},[_vm._v(\"Debug: Add BP\")])]):_vm._e(),_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.currentStep === 'WOW'),expression:\"this.currentStep === 'WOW'\"}],staticClass:\"weight-slider-controls\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.wowInstructions)}}),_c('p',[_c('label',{attrs:{\"for\":\"points\"}},[_vm._v(_vm._s(_vm.tl(\"change\"))+\" \"),_c('span',{staticClass:\"editable-weight\"}),_vm._v(\": \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.weightSliderValue),expression:\"weightSliderValue\"}],attrs:{\"type\":\"range\",\"id\":\"weight-slider-input\",\"name\":\"weight\",\"min\":\"-100\",\"max\":\"100\"},domProps:{\"value\":(_vm.weightSliderValue)},on:{\"__r\":function($event){_vm.weightSliderValue=$event.target.value}}}),_c('span',{staticClass:\"weight-change\",class:[_vm.weightChange.value >= 0 ? 'positive' : 'negative']},[_vm._v(\" \"+_vm._s(_vm.weightChange.formatted)+\" \")])]),_c('p',[_vm._v(\" \"+_vm._s(_vm.tl(\"change\"))+\" \"),_c('span',{staticClass:\"editable-weight\"}),_vm._v(\" \"+_vm._s(_vm.tl(\"to\"))+\" \"+_vm._s(_vm.newEditableWeightValue.toFixed(2))+\" (\"),_c('span',{staticClass:\"weight-change\",class:[_vm.weightChange.value >= 0 ? 'positive' : 'negative']},[_vm._v(_vm._s(_vm.weightChange.formatted))]),_vm._v(\") \"+_vm._s(_vm.tl(\"yieldsError\"))+\" \"+_vm._s(_vm.totalNetError.toFixed(_vm.errorPrecisionDigits))+\" (\"),_c('span',{staticClass:\"weight-change\",class:[_vm.costChange.value >= 0 ? 'positive' : 'negative']},[_vm._v(_vm._s(_vm.costChange.formatted))]),_vm._v(\") \")])])]),(this.currentStep != 'WOW')?_c('span',{staticClass:\"proceed-button\",class:{\n        disabled: _vm.submitted,\n        submit: _vm.currentStep === 'BP' && !_vm.submitted\n      },on:{\"click\":_vm.proceed}},[_vm._v(\" \"+_vm._s(_vm.proceedButtonText)+\" \")]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',[_c('div',{staticClass:\"net-function\",attrs:{\"id\":\"net-function\"}})]),_c('td',[_c('div',{staticClass:\"net-function\",attrs:{\"id\":\"err-function\"}})])])}]\n\nexport { render, staticRenderFns }","import * as d3 from \"d3\";\n\nimport { Point, BackpropGraph } from \"./interfaces\";\n\nexport function bezierPoint(\n  percent: number,\n  p1: Point,\n  cp1: Point,\n  cp2: Point,\n  p2: Point\n): Point {\n  function b1(t: number): number {\n    return t * t * t;\n  }\n  function b2(t: number): number {\n    return 3 * t * t * (1 - t);\n  }\n  function b3(t: number): number {\n    return 3 * t * (1 - t) * (1 - t);\n  }\n  function b4(t: number): number {\n    return (1 - t) * (1 - t) * (1 - t);\n  }\n  const pos: Point = { x: 0, y: 0 };\n  pos.x =\n    p1.x * b1(percent) +\n    cp1.x * b2(percent) +\n    cp2.x * b3(percent) +\n    p2.x * b4(percent);\n  pos.y =\n    p1.y * b1(percent) +\n    cp1.y * b2(percent) +\n    cp2.y * b3(percent) +\n    p2.y * b4(percent);\n  return pos;\n}\n\nexport function linePointAt(\n  s: d3.HierarchyPointNode<BackpropGraph>,\n  d: d3.HierarchyPointNode<BackpropGraph>,\n  percent: number\n): Point {\n  const center = (s.y + d.y) / 2;\n  const source = { x: s.y, y: s.x };\n  const dest = { x: d.y, y: d.x };\n  return bezierPoint(\n    percent,\n    source,\n    { x: center, y: s.x },\n    { x: center, y: d.x },\n    dest\n  );\n}\n\nexport function diagonal(s: Point, d: Point): string {\n  const path = `M ${s.y} ${s.x}\n                C ${(s.y + d.y) / 2} ${s.x},\n                  ${(s.y + d.y) / 2} ${d.x},\n                  ${d.y} ${d.x}`;\n  return path;\n}\n","export function formatString(s: string, ...insertions: string[]): string {\n  return s.replace(/{(\\d+)}/g, function(match, number) {\n    return typeof insertions[number] != \"undefined\"\n      ? insertions[number]\n      : match;\n  });\n}\n\nexport function roundNd(n: number, d: number): number {\n  return Math.round(n * Math.pow(10, d)) / Math.pow(10, d);\n}\n\nexport function round2d(n: number): number {\n  return roundNd(n, 2);\n}\n\nexport function fixedNd(n: number, before: number, after: number): string {\n  return (\"0\".repeat(before) + roundNd(n, after).toFixed(after)).slice(\n    -before - after\n  );\n}\n\nexport function parseFloatStrict(value: string) {\n  if (/^(-|\\+)?([0-9]+(\\.[0-9]+)?)$/.test(value)) return Number(value);\n  return NaN;\n}\n","export interface Point {\n  x: number;\n  y: number;\n}\n\nexport interface Example {\n  errorHandler: (observed: number, expected: number) => number;\n  netFuncTex: string;\n  errFuncTex: string;\n  netTree: BackpropGraph;\n}\n\nexport interface Graph {\n  func: string;\n  nodeId: number;\n  ffValue?: number;\n  currentFFValue?: number;\n  bpValue?: number;\n  children?: Graph[];\n  accumulate: (c: number[]) => number;\n}\n\nexport class BackpropGraph implements Graph {\n  func = \"\";\n  nodeId = 0;\n  ffValue?: number;\n  currentFFValue?: number;\n  bpValue?: number;\n  children?: Graph[];\n  accumulate: (c: number[]) => number = (): number => NaN;\n}\n\nexport enum Step {\n  FF = \"FF\",\n  BP = \"BP\",\n  WOW = \"WOW\"\n}\n\nexport enum Language {\n  DE = \"de\",\n  EN = \"en\"\n}\n","import { Language as L } from \"./interfaces\";\n\nexport const translations: { [key: string]: Map<L, string> } = {\n  submit: new Map([\n    [L.DE, \"Lösung einreichen\"],\n    [L.EN, \"Submit solution\"]\n  ]),\n  netFunction: new Map([\n    [L.DE, \"Dieses Netz berechnet die folgende Funktion:\"],\n    [L.EN, \"This network calculates the following function:\"]\n  ]),\n  errFunction: new Map([\n    [L.DE, \"Dieses Netz nutzt die folgende Fehlerfunktion:\"],\n    [L.EN, \"This network uses the following cost function:\"]\n  ]),\n  tip: new Map([\n    [\n      L.DE,\n      \"Tipp: Benutze Stift und Papier für diese Übung! Das Formular dient nur zur Abgabe!\"\n    ],\n    [\n      L.EN,\n      \"Tip: Use pen and paper to solve this exercise! This form is only for the submission!\"\n    ]\n  ]),\n  invalidNumber: new Map([\n    [L.DE, `Der eingegebene Wert \"{0}\" ist keine gültige Zahl!`],\n    [L.EN, `The number {0} you entered is not a valid number!`]\n  ]),\n  missingValues: new Map([\n    [L.DE, \"Es fehlen {0} Eingabewert(e)!\"],\n    [L.EN, `{0} value(s) are missing!`]\n  ]),\n  wrongFFValue: new Map([\n    [\n      L.DE,\n      \"Bist du dir sicher? Wir haben {0} andere(n) Wert(e) heraus! Tip: {1} sieht falsch aus. Alle Werte davor stimmen, also versuche doch nochmal diesen Wert zu berechnen ;)\"\n    ],\n    [\n      L.EN,\n      \"Are you sure? We have {0} value(s) different! Hint: {1} seems wrong. All values before are correct, so try to recalculate this number ;)\"\n    ]\n  ]),\n  change: new Map([\n    [L.DE, \"Änderung von\"],\n    [L.EN, \"Changing\"]\n  ]),\n  to: new Map([\n    [L.DE, \"zu\"],\n    [L.EN, \"to\"]\n  ]),\n  submitted: new Map([\n    [L.DE, \"Abgegeben\"],\n    [L.EN, \"Submitted\"]\n  ]),\n  yieldsError: new Map([\n    [L.DE, \"ergibt einen Fehler von\"],\n    [L.EN, \"yields error\"]\n  ]),\n  step: new Map([\n    [L.DE, \"Schritt\"],\n    [L.EN, \"Step\"]\n  ]),\n  expected: new Map([\n    [L.DE, \"Soll-Wert\"],\n    [L.EN, \"Expected\"]\n  ]),\n  nextStep: new Map([\n    [L.DE, \"Weiter zum Backpropagation Schritt\"],\n    [L.EN, \"Move on to the backpropagation step\"]\n  ]),\n  thanks: new Map([\n    [\n      L.DE,\n      \"Danke dass du dir Zeit für diese Übung genommen hast! Deine Ergebnisse wurden übermittelt!\"\n    ],\n    [\n      L.EN,\n      \"Thank you for taking the time for this exercise! Your results were successfully transmitted!\"\n    ]\n  ]),\n  whywow: new Map([\n    [\n      L.DE,\n      \"Du hast erfolreich den Backpropagation Schritt durchgeführt! Nun kannst du deine berechneten Gradienten einmal selbst nutzen um den Fehler dieses Netzes zu verringern! Du errinnerst dich bestimmt daran, dass der Gradient eines Gewichtes/Bias uns sagt mit welcher Intensität das Gewicht/Bias vergrößert oder verkleinert werden sollte. Probiere doch einmal das Netz mit dem Schieberegler unten auf dieser Seite zu verbessern :)\"\n    ],\n    [\n      L.EN,\n      \"You have successfully performed the backpropagation step! You can now use your calculated gradients to decrease the network's error! You might remember that the gradient of a weight/bias tells us how much this weight/bias needs to be increased or decreased to minimize the error. Go ahead and try to improve this network with the slider at the bottom of the page :)\"\n    ]\n  ]),\n  wowinstructions: new Map([\n    [\n      L.DE,\n      \"Hier kannst du den Wert von {0} anpassen und sehen, wie sich die Änderung auf den Fehler des Netzes auswirkt. Du wirst sehen, dass sich der Fehler bei Änderung in Richtung des negativen Gradienten verringern wird. Nichts anderes passiert im Gradient Descent Verfahren beim Trainieren von künstlichen neuronalen Netzen...\"\n    ],\n    [\n      L.EN,\n      \"Here you can change the value of {0} and see how the changes will affect the networks error. You will see that the error decreases when {0} is changed in the direction of the negative gradient. This is what is done with Gradient Descent during training of artificial neural networks...\"\n    ]\n  ])\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as d3 from \"d3\";\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport katex from \"katex\";\nimport { diagonal, linePointAt } from \"@/geometry\";\nimport {\n  formatString,\n  round2d,\n  roundNd,\n  fixedNd,\n  parseFloatStrict\n} from \"@/utils\";\nimport { translations } from \"@/translations\";\nimport { Point, BackpropGraph, Language, Step } from \"@/interfaces\";\nexport * from \"@/interfaces\";\nexport { round2d, fixedNd } from \"@/utils\";\n\ndeclare global {\n  interface Window {\n    checkUserNumberInput: (input: HTMLInputElement) => void;\n  }\n}\n\nconst defaultErrFunc = `\n\\\\begin{aligned}\n    &C(w_0, x_0, w_1, x_1, b, e) \\\\\\\\\n  = &(n(w_0, x_0, w_1, x_1, b) - e)^2\n\\\\end{aligned}`;\n\nconst defaultErrorFunction = (observed: number, expected: number): number => {\n  return round2d(Math.pow(round2d(observed) - round2d(expected), 2));\n};\n\n@Component\nexport default class VueBackpropagationExercise extends Vue {\n  @Prop() private data!: BackpropGraph;\n  @Prop() private func!: string;\n  @Prop() private editable!: string;\n  @Prop() private debug?: boolean;\n  @Prop({ default: Language.EN }) private lang!: Language | string;\n  @Prop() private submissionValidator!: (values: {\n    [key: string]: number;\n  }) => { valid: boolean; message?: string };\n  @Prop({ default: () => defaultErrorFunction }) protected netErrorHandler!: (\n    observed: number,\n    expected: number\n  ) => number;\n  @Prop({ default: 5 }) protected errorPrecisionDigits!: number;\n  @Prop({ default: 500 }) protected width!: number;\n  @Prop({ default: 300 }) protected height!: number;\n  @Prop({ default: 600 }) protected animationDuration!: number;\n  @Prop({ default: 0.4 }) protected animationPreshootFactor!: number;\n  @Prop({ default: 100 }) protected padding!: number;\n  @Prop({ default: 0.5 }) protected weightSliderRelativeRange!: number;\n  @Prop({ default: 50 }) protected expectedOut!: number;\n  @Prop({ default: defaultErrFunc }) private errorFunc!: string;\n  @Prop({ default: 15 }) protected circleRadius!: number;\n  @Prop({ default: \"#4a47a3\" }) protected circleColor!: string;\n  @Prop({ default: \"#413c69\" }) protected circleOutlineColor!: string;\n  @Prop({ default: \"#c9485b\" }) protected redColor!: string;\n  @Prop({ default: \"#8cba51\" }) protected greenColor!: string;\n  @Prop({ default: \"#ccc\" }) protected arrowColor!: string;\n  @Prop({ default: 7 }) protected arrowSize!: number;\n\n  protected weightSliderValue = 0;\n  protected newEditableWeightValue = 0.5;\n  protected ffOverrides: { [key: string]: number } = {};\n\n  protected netErrorCausedValue = 0.5;\n  protected totalNetError = 0;\n  protected initialNetError = 0;\n  protected submitted = false;\n\n  protected treeData: BackpropGraph;\n  protected tree: d3.TreeLayout<BackpropGraph>;\n  protected svg: d3.Selection<SVGSVGElement, BackpropGraph, HTMLElement, any>; // eslint-disable-line @typescript-eslint/no-explicit-any\n  protected root: d3.HierarchyPointNode<BackpropGraph>;\n  protected treeMap: d3.HierarchyPointNode<BackpropGraph>;\n  protected nodes: d3.HierarchyPointNode<BackpropGraph>[];\n  protected links: d3.HierarchyPointNode<BackpropGraph>[];\n\n  protected currentStep: Step = Step.FF;\n\n  @Watch(\"weightSliderValue\")\n  onWeightSliderValue(val: string) {\n    const changes = this.links\n      .filter(d => d.data.func === this.editable)\n      .map(d => {\n        const ffInput = document.getElementById(\n          this.inputId(d, Step.FF)\n        ) as HTMLInputElement;\n        if (ffInput != null && ffInput != undefined) {\n          const parsedValue = parseFloatStrict(val.replace(\",\", \".\"));\n          if (!isNaN(parsedValue)) {\n            ffInput.disabled = true;\n            const newValue = round2d(\n              round2d(d.data.ffValue ?? 0) +\n                this.weightSliderRelativeRange *\n                  round2d(d.data.ffValue ?? 0) *\n                  (round2d(parsedValue) / 100)\n            );\n            ffInput.value = newValue.toString();\n            d.data.currentFFValue = newValue;\n            const netOut = this.feedforward(this.root).out;\n            this.updateError(netOut, this.expectedOut);\n            return newValue;\n          }\n        }\n        return NaN;\n      });\n    this.newEditableWeightValue = changes[0];\n  }\n\n  tl(key: string): string {\n    return (\n      translations[key].get((this.lang ?? Language.EN) as Language) ??\n      \"<missing translation>\"\n    );\n  }\n\n  get wowInstructions(): string {\n    const mathEditableHtml = katex.renderToString(this.editable, {\n      throwOnError: false\n    });\n    return formatString(this.tl(\"wowinstructions\"), mathEditableHtml);\n  }\n\n  get weightChange(): { value: number; formatted: string } {\n    return {\n      value: this.weightSliderValue * this.weightSliderRelativeRange,\n      formatted: `${this.weightSliderValue >= 0 ? \"+\" : \"-\"}${fixedNd(\n        Math.abs(this.weightSliderValue * this.weightSliderRelativeRange),\n        2,\n        0\n      )}%`\n    };\n  }\n\n  get costChange(): { value: number; formatted: string } {\n    const costChangePercent =\n      (1 -\n        this.initialNetError /\n          Math.max(\n            this.totalNetError,\n            1.0 / Math.pow(10, this.errorPrecisionDigits)\n          )) *\n      100;\n    return {\n      value: costChangePercent,\n      formatted: `${costChangePercent >= 0 ? \"+\" : \"\"}${round2d(\n        costChangePercent\n      ).toFixed(0)}%`\n    };\n  }\n\n  get proceedButtonText(): string {\n    return this.submitted\n      ? this.tl(\"submitted\")\n      : this.currentStep === Step.FF\n      ? this.tl(\"nextStep\")\n      : this.tl(\"submit\");\n  }\n\n  public constructor() {\n    super();\n    this.treeData = {\n      func: \"\",\n      nodeId: -1,\n      accumulate: (c: number[]): number => {\n        return c.reduce((acc, elem) => acc + elem, 0);\n      },\n      bpValue: 1,\n      children: [this.data]\n    };\n    this.tree = d3.tree<BackpropGraph>().size([this.height, this.width]);\n    const root = d3.hierarchy(this.treeData, d => {\n      return d.children;\n    });\n    this.svg = d3.select<SVGSVGElement, BackpropGraph>(\"div.computation-graph\");\n    this.treeMap = this.tree(root);\n    this.nodes = this.treeMap.descendants();\n    this.root = this.nodes[0];\n    this.links = this.treeMap.descendants().slice(1);\n    this.links.forEach(d => {\n      if (d.data?.ffValue != undefined)\n        this.ffOverrides[this.inputId(d, Step.FF)] = d.data?.ffValue;\n    });\n\n    this.initialNetError = roundNd(\n      this.netErrorHandler(\n        roundNd(\n          this.feedforward(this.root, undefined, true).out,\n          this.errorPrecisionDigits\n        ),\n        roundNd(this.expectedOut, this.errorPrecisionDigits)\n      ),\n      this.errorPrecisionDigits\n    );\n  }\n\n  debugBP(correct: boolean): void {\n    this.links.forEach(d => {\n      const inputId = this.inputId(d, Step.BP);\n      const bpInput = document.getElementById(inputId) as HTMLInputElement;\n      if (\n        d.data.bpValue === undefined &&\n        bpInput != null &&\n        bpInput != undefined\n      ) {\n        bpInput.value = correct ? \"1\" : \"1\";\n      }\n    });\n  }\n\n  inputId(d: d3.HierarchyPointNode<BackpropGraph>, step: Step) {\n    return `${step === Step.FF ? \"ff\" : \"bp\"}_${d.data.nodeId}_to_${d.parent\n      ?.data?.nodeId ?? \"undefined\"}`;\n  }\n\n  validFFInputValues(): boolean {\n    // Check against FF\n    const correct = this.feedforward(this.root, undefined, true).acc;\n\n    // Check there are no empty values\n    const invalid: string[] = [];\n    const wrong: { id: string; value: string }[] = [];\n    // Tolerance is dangerous as we do not know how this will affect following neurons\n    // Infering erros from the neurons inverse depth is also bad because some neuron functions have more impact than others\n    // Allowing for some tolerance would require to perform the FF step using the users values\n    const tolerance = 0;\n\n    this.links.forEach(d => {\n      const inputId = this.inputId(d, Step.FF);\n      const ffInput = document.getElementById(inputId) as HTMLInputElement;\n      if (\n        d.data.ffValue === undefined &&\n        ffInput != null &&\n        ffInput != undefined\n      ) {\n        if (ffInput.value.length < 1) {\n          invalid.push(inputId);\n        } else if (\n          Math.abs(parseFloatStrict(ffInput.value) - correct[inputId]) >\n          tolerance\n        ) {\n          wrong.push({ id: inputId, value: ffInput.value });\n        }\n      }\n    });\n    if (invalid.length > 0) {\n      alert(formatString(this.tl(\"missingValues\"), invalid.length.toString()));\n      return false;\n    }\n    if (wrong.length > 0) {\n      alert(\n        formatString(\n          this.tl(\"wrongFFValue\"),\n          wrong.length.toString(),\n          wrong[wrong.length - 1].value.toString()\n        )\n      );\n      return false;\n    }\n    return true;\n  }\n\n  validBPInputValues(): boolean {\n    // Check there are no empty values\n    const invalid: string[] = [];\n    this.links.forEach(d => {\n      const inputId = this.inputId(d, Step.BP);\n      const bpInput = document.getElementById(inputId) as HTMLInputElement;\n      if (\n        d.data.bpValue === undefined &&\n        bpInput != null &&\n        bpInput != undefined\n      ) {\n        if (bpInput.value.length < 1) invalid.push(inputId);\n      }\n    });\n    if (invalid.length > 0) {\n      alert(formatString(this.tl(\"missingValues\"), invalid.length.toString()));\n      return false;\n    }\n    return true;\n  }\n\n  collectBPInputValues(): { [key: string]: number } {\n    const values: { [key: string]: number } = {};\n    this.links.forEach(d => {\n      const inputId = this.inputId(d, Step.BP);\n      const bpInput = document.getElementById(inputId) as HTMLInputElement;\n      if (\n        d.data.bpValue === undefined &&\n        bpInput != null &&\n        bpInput != undefined\n      ) {\n        values[inputId] = parseFloatStrict(bpInput.value);\n      }\n    });\n    return values;\n  }\n\n  proceed(): void {\n    if (this.submitted) return;\n\n    if (this.currentStep == Step.FF) {\n      if (!this.validFFInputValues()) return;\n      this.toggleStep(Step.BP);\n      this.currentStep = Step.BP;\n      const netOut = this.feedforward(this.root).out;\n      this.updateError(netOut, this.expectedOut);\n    } else if (this.currentStep == Step.BP) {\n      if (!this.validBPInputValues()) return;\n      const validation = this.submissionValidator(this.collectBPInputValues());\n      this.submitted = true;\n      alert(validation.message ?? this.tl(\"thanks\"));\n      if (validation.valid) {\n        // Do not proceed to the WOW stage with wrong values\n        alert(this.tl(\"whywow\"));\n        this.toggleStep(Step.WOW);\n        this.currentStep = Step.WOW;\n      }\n    }\n  }\n\n  mounted() {\n    // Render the net and error functions\n    const netFuncElement = document.getElementById(\"net-function\");\n    if (netFuncElement != null)\n      katex.render(this.func, netFuncElement, {\n        throwOnError: false\n      });\n\n    const errFuncElement = document.getElementById(\"err-function\");\n    if (errFuncElement != null)\n      katex.render(this.errorFunc, errFuncElement, {\n        throwOnError: false\n      });\n\n    window.checkUserNumberInput = (input: HTMLInputElement): void => {\n      const enteredValue = input.value;\n      if (\n        enteredValue != undefined &&\n        enteredValue != null &&\n        enteredValue.length > 0\n      ) {\n        const parsedValue = parseFloatStrict(enteredValue.replace(\",\", \".\"));\n        if (isNaN(parsedValue)) {\n          alert(formatString(this.tl(\"invalidNumber\"), enteredValue));\n          input.value = \"\";\n          return;\n        }\n        const roundedValue = round2d(parsedValue);\n        input.value = roundedValue.toFixed(2);\n      }\n    };\n\n    this.svg = d3\n      .select<d3.BaseType, BackpropGraph>(\"div.computation-graph\")\n      .append(\"svg\")\n      .attr(\n        \"viewBox\",\n        `-${this.padding} 0 ${this.width + 1.5 * this.padding} ${this.height}`\n      )\n      .style(\"font-size\", \"0.5rem\");\n\n    this.svg\n      .append(\"defs\")\n      .selectAll(\"marker\")\n      .data([\"resolved\"])\n      .join(\"marker\")\n      .attr(\"id\", d => `arrow-${d}`)\n      .attr(\"viewBox\", `0 -5 10 10`)\n      .attr(\"refX\", `${this.arrowSize + Math.round(this.circleRadius / 2) + 1}`)\n      .attr(\"refY\", \"0px\")\n      .attr(\"markerWidth\", `${this.arrowSize}`)\n      .attr(\"markerHeight\", `${this.arrowSize}`)\n      .append(\"path\")\n      .attr(\"fill\", this.arrowColor)\n      .attr(\"d\", \"M0,-5L10,0L0,5\");\n\n    this.build(this.root);\n  }\n\n  toggleInputsForStep(step: Step): void {\n    this.links.forEach(d => {\n      const ffInput = document.getElementById(\n        this.inputId(d, Step.FF)\n      ) as HTMLInputElement;\n      const bpInput = document.getElementById(\n        this.inputId(d, Step.BP)\n      ) as HTMLInputElement;\n      if (\n        d.data.ffValue === undefined &&\n        ffInput != null &&\n        ffInput != undefined\n      ) {\n        ffInput.style[\"border\"] =\n          step != Step.FF ? \"none\" : `1px solid ${this.greenColor}`;\n        ffInput.disabled = step != Step.FF;\n      }\n      if (bpInput != null && bpInput != undefined) {\n        if (d.data.bpValue === undefined) {\n          bpInput.disabled = step != Step.BP;\n          bpInput.style[\"border\"] =\n            step != Step.BP ? \"none\" : `1px solid ${this.redColor}`;\n        }\n        bpInput.hidden = step != Step.BP;\n      }\n    });\n  }\n\n  orientForStep(step: Step): number {\n    return step === Step.BP ? 180 : 0;\n  }\n\n  toggleArrowsForStep(step: Step): void {\n    this.svg.selectAll(\"defs marker\").attr(\"orient\", this.orientForStep(step));\n\n    if (step == Step.FF)\n      this.svg\n        .selectAll(\"path.link\")\n        .attr(\n          \"marker-end\",\n          `url(${new URL(`#arrow-resolved`, window.location.href)})`\n        )\n        .attr(\"marker-start\", \"none\");\n\n    if (step == Step.BP)\n      this.svg\n        .selectAll(\"path.link\")\n        .attr(\"marker-end\", \"none\")\n        .attr(\n          \"marker-start\",\n          `url(${new URL(`#arrow-resolved`, window.location.href)})`\n        );\n  }\n\n  feedforward(\n    d: d3.HierarchyPointNode<BackpropGraph>,\n    acc?: { [key: string]: number },\n    quiet?: boolean\n  ): { out: number; acc: { [key: string]: number } } {\n    if (acc == undefined) {\n      acc = {}; // Base case\n    }\n    const ffInputValues: number[] = (d?.children ?? []).map(c => {\n      if (c.data?.currentFFValue != undefined)\n        return round2d(c.data?.currentFFValue);\n      if (c.data?.ffValue != undefined) return round2d(c.data?.ffValue);\n      return this.feedforward(c, acc, quiet).out;\n    });\n    const ffValue = round2d(d.data.accumulate(ffInputValues));\n    if (d.parent) {\n      const key = this.inputId(d, Step.FF);\n      acc[key] = ffValue;\n      if (!(quiet === true)) {\n        const ffInput = document.getElementById(key) as HTMLInputElement;\n        if (ffInput != null && ffInput != undefined) {\n          // Make bold\n          ffInput.style.setProperty(\n            \"font-weight\",\n            parseFloatStrict(ffInput.value) !== ffValue ? \"bold\" : \"normal\"\n          );\n          ffInput.value = ffValue.toString();\n        }\n      }\n    }\n    return {\n      out: ffValue,\n      acc: acc\n    };\n  }\n\n  updateError(observed: number, expected: number): void {\n    const netOut = round2d(observed);\n    const expectedOut = round2d(expected);\n    this.totalNetError = roundNd(\n      this.netErrorHandler(\n        roundNd(netOut, this.errorPrecisionDigits),\n        roundNd(expectedOut, this.errorPrecisionDigits)\n      ),\n      this.errorPrecisionDigits\n    );\n    const totalErrorText = document.getElementById(\"net_error\") as HTMLElement;\n    if (totalErrorText != undefined && totalErrorText != null) {\n      const errorTex = `\n\\\\text{${this.tl(\"expected\")} ${expectedOut}} \\\\\\\\ \\\\\\\\\n\\\\begin{aligned}\nE &= {(${netOut} - ${expectedOut})}^2 \\\\\\\\\n  &= ${this.totalNetError} \\\\\\\\\n\\\\end{aligned}`;\n      katex.render(errorTex, totalErrorText, {\n        throwOnError: false\n      });\n    }\n  }\n\n  toggleStep(step: Step): void {\n    this.toggleInputsForStep(step);\n    this.toggleArrowsForStep(step);\n    const texPlaceholders: HTMLCollectionOf<Element> = document.getElementsByClassName(\n      \"editable-weight\"\n    );\n    for (let i = 0; i < texPlaceholders.length; i++) {\n      katex.render(this.editable, texPlaceholders[i] as HTMLElement, {\n        throwOnError: false\n      });\n    }\n  }\n\n  centeredChildPoint(d: d3.HierarchyPointNode<BackpropGraph>): Point {\n    const maxChildX = (\n      children: d3.HierarchyPointNode<BackpropGraph>[]\n    ): number => {\n      return Math.max(...children.map(d => d.y));\n    };\n    const p =\n      d.children && d.children.length > 0\n        ? {\n            y: maxChildX(d.children),\n            x: (d.children[0].x + d.children[d.children.length - 1].x) / 2\n          }\n        : d;\n    return p;\n  }\n\n  build(source: d3.HierarchyPointNode<BackpropGraph>) {\n    // Normalize for fixed-depth.\n    this.nodes.forEach(d => {\n      const factorW = this.width / (source.height + 1);\n      d.y = (source.height - d.depth) * factorW;\n    });\n\n    // ****************** Nodes section ***************************\n\n    //  Update the nodes...\n    this.svg.selectAll(\"g.node\").data(this.nodes);\n\n    const circleNodes = this.svg\n      .selectAll(\"g.node\")\n      .data(this.nodes.filter(dd => dd.depth > 0));\n\n    const lastNode = this.svg\n      .selectAll(\"g.node\")\n      .data(this.nodes.filter(dd => dd.depth == 0));\n\n    const errorHeight = 50;\n    const errorWidth = 50;\n    lastNode\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"node\")\n      .attr(\"transform\", () => {\n        return \"translate(\" + source.y + \",\" + source.x + \")\";\n      })\n      .append(\"foreignObject\")\n      .attr(\"class\", \"externalObject\")\n      .attr(\"y\", `-${errorHeight / 2}px`)\n      .attr(\"width\", `${errorWidth}px`)\n      .attr(\"height\", `${errorHeight}px`)\n      .style(\"color\", \"black\")\n      .attr(\"overflow\", \"visible\")\n      .html(\n        () =>\n          `<text style='height: ${errorHeight}px; width: ${errorWidth};' id='net_error'></text>`\n      );\n\n    const nodeEnter = circleNodes\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"node\")\n      .attr(\"transform\", d => {\n        const origin = this.centeredChildPoint(d);\n        return \"translate(\" + origin.y + \",\" + origin.x + \")\";\n      });\n\n    nodeEnter\n      .append(\"circle\")\n      .attr(\"class\", \"node\")\n      .style(\"stroke\", this.circleOutlineColor)\n      .style(\"stroke-width\", \"2px\")\n      .attr(\"r\", 1e-6)\n      .style(\"fill\", \"white\");\n\n    nodeEnter\n      .append(\"foreignObject\")\n      .attr(\"class\", \"externalObject\")\n      .attr(\"x\", `-${this.circleRadius / 2}px`)\n      .attr(\"y\", `-${this.circleRadius / 2}px`)\n      .attr(\"width\", `${this.circleRadius}px`)\n      .attr(\"height\", `${this.circleRadius}px`)\n      .style(\"color\", \"white\")\n      .style(\"font-size\", `${this.circleRadius * 0.75}px`)\n      .attr(\"overflow\", \"visible\")\n      .html(d => {\n        const mathFuncHtml = katex.renderToString(d.data.func, {\n          throwOnError: false\n        });\n        return `<div style='height: ${this.circleRadius / 2}; width: ${\n          this.circleRadius\n        };' id='func_${d.data.nodeId}'>${mathFuncHtml}</div>`;\n      });\n\n    const animationDelay = (\n      d: d3.HierarchyPointNode<BackpropGraph>\n    ): number => {\n      return (\n        (source.height - d.depth) *\n        this.animationDuration *\n        this.animationPreshootFactor\n      );\n    };\n\n    nodeEnter\n      .transition()\n      .delay(d => animationDelay(d))\n      .duration(this.animationDuration)\n      .attr(\"transform\", d => {\n        return \"translate(\" + d.y + \",\" + d.x + \")\";\n      })\n      .select(\"circle.node\")\n      .attr(\"r\", this.circleRadius)\n      .style(\"fill\", this.circleColor);\n\n    // Update the links...\n    const link = this.svg\n      .selectAll<d3.BaseType, d3.HierarchyPointNode<BackpropGraph>>(\"path.link\")\n      .data(this.links);\n\n    // Enter any new links at the parent's previous position.\n    const linkEnter = link\n      .enter()\n      .insert(\"path\", \"g\")\n      .attr(\"class\", \"link\")\n      .style(\"fill\", \"none\")\n      .style(\"stroke\", \"#ccc\")\n      .style(\"stroke-width\", \"2px\")\n      .style(\"opacity\", 0)\n      .attr(\"d\", d => {\n        const origin = this.centeredChildPoint(d);\n        return diagonal(origin, origin);\n      });\n\n    linkEnter\n      .transition()\n      .delay(d => animationDelay(d))\n      .duration(this.animationDuration)\n      .style(\"opacity\", 1)\n      .attr(\n        `marker-${this.currentStep == Step.FF ? \"end\" : \"start\"}`,\n        () => `url(${new URL(`#arrow-resolved`, window.location.href)})`\n      )\n      .attr(\"d\", d => {\n        return diagonal(d, d.parent ?? d);\n      })\n      .attr(\"marker-orient\", () => {\n        return 10;\n      });\n\n    const inputWidth = \"2rem\";\n    const inputHeight = 15;\n    const inputPlaceholder = \"?\";\n    const spacing = 5;\n\n    const ffInputsEnter = link\n      .enter()\n      .insert(\"foreignObject\", \"g\")\n      .attr(\"class\", \"externalObject\")\n      .attr(\"transform\", d => {\n        const origin = this.centeredChildPoint(d);\n        return \"translate(\" + origin.y + \",\" + origin.x + \")\";\n      })\n      .attr(\"width\", inputWidth)\n      .attr(\"overflow\", \"visible\")\n      .attr(\"height\", `${inputHeight}px`)\n      .style(\"opacity\", 0);\n\n    ffInputsEnter.append(\"xhtml:div\").html(d => {\n      const isEditable = d.data.ffValue === undefined;\n      const style = `background: transparent; font-size: 0.5rem; height: ${inputHeight}px; width: ${inputWidth}; border: none; padding: 0;`;\n      return `<input type='text' onchange=window.checkUserNumberInput(this) ${\n        isEditable ? \"\" : \"disabled value=\" + d.data.ffValue\n      } style='${style}' id='${this.inputId(\n        d,\n        Step.FF\n      )}' placeholder='${inputPlaceholder}'></input>`;\n    });\n\n    ffInputsEnter\n      .transition()\n      .delay(d => animationDelay(d))\n      .duration(this.animationDuration)\n      .attr(\"transform\", d => {\n        const y = linePointAt(d, d.parent ?? d, 0.75).y - inputHeight - spacing;\n        const x = linePointAt(d, d.parent ?? d, 0.75).x;\n        return \"translate(\" + x + \",\" + y + \")\";\n      })\n      .style(\"opacity\", 1);\n\n    link\n      .enter()\n      .insert(\"foreignObject\", \"g\")\n      .attr(\"class\", \"externalObject\")\n      .attr(\"width\", inputWidth)\n      .attr(\"transform\", d => {\n        const y = linePointAt(d, d.parent ?? d, 0.75).y + spacing;\n        const x = linePointAt(d, d.parent ?? d, 0.75).x;\n        return \"translate(\" + x + \",\" + y + \")\";\n      })\n      .attr(\"hidden\", true)\n      .attr(\"overflow\", \"visible\")\n      .attr(\"height\", `${inputHeight}px`)\n      .append(\"xhtml:div\")\n      .html(d => {\n        const isEditable = d.data.bpValue === undefined;\n        const style = `background: transparent; font-size: 0.5rem; height: ${inputHeight}px; width: ${inputWidth}; border: none; padding: 0;`;\n        return `<input type='text' onchange=window.checkUserNumberInput(this) disabled ${\n          isEditable ? \"\" : \"value=\" + d.data.bpValue\n        } hidden style='${style}' id='${this.inputId(\n          d,\n          Step.BP\n        )}' placeholder='${inputPlaceholder}'></input>`;\n      });\n\n    this.toggleStep(this.currentStep);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBackpropagationExercise.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBackpropagationExercise.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VueBackpropagationExercise.vue?vue&type=template&id=0852a1fd&scoped=true&\"\nimport script from \"./VueBackpropagationExercise.vue?vue&type=script&lang=ts&\"\nexport * from \"./VueBackpropagationExercise.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VueBackpropagationExercise.vue?vue&type=style&index=0&id=0852a1fd&scoped=true&lang=sass&\"\nimport style1 from \"./VueBackpropagationExercise.vue?vue&type=style&index=1&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0852a1fd\",\n  null\n  \n)\n\nexport default component.exports","export const powFunc = (c: number[]): number => {\n  if (c.length != 1) {\n    throw new TypeError(\n      `Pow can only handle exactle one input (not ${c.length})`\n    );\n  }\n  return Math.pow(c[0], 2);\n};\n\nexport const errorFunction = (observed: number, expected: number): number => {\n  // observed and expected have been rounded to errorPrecisionDigits digits\n  // the return value will also be rounded to errorPrecisionDigits digits\n  return Math.pow(observed - expected, 2);\n};\n\nexport const addFunc = (c: number[]): number => {\n  return c.reduce((acc, elem) => acc + elem, 0);\n};\n\nexport const multFunc = (c: number[]): number => {\n  return c.reduce((acc, elem) => acc * elem, 1);\n};\n\nexport const leafFunc = (): number => {\n  return NaN;\n};\n","import { Example } from \"../interfaces\";\nimport { errorFunction, addFunc, multFunc, leafFunc } from \"../neurons\";\n\nconst powThreeQuarterFunc = (c: number[]): number => {\n  if (c.length != 1) {\n    throw new TypeError(\n      `Pow can only handle exactly one input (not ${c.length})`\n    );\n  }\n  return Math.pow(c[0], 0.75);\n};\n\nconst example: Example = {\n  errorHandler: errorFunction,\n  netFuncTex: `\n      \\\\begin{aligned}\n         &n(w_0, w_1, w_2, w_3, w_4, w_5, x_0, x_1, b_0, b_1, b_2) \\\\\\\\\n      = (&(w_0\\\\cdot x_0 + w_1\\\\cdot x_1 + b_0)^{3/4} \\\\cdot w_4 + \\\\\\\\\n        &(w_2\\\\cdot x_0 + w_3\\\\cdot x_1 + b_1)^{3/4} \\\\cdot w_5 + b_2)^{3/4}\n      \\\\end{aligned}`,\n\n  errFuncTex: `\n    \\\\begin{aligned}\n        &C(w_0, w_1, w_2, w_3, w_4, w_5, x_0, x_1, b_0, b_1, b_2, e) \\\\\\\\\n      = &(n(w_0, w_1, w_2, w_3, w_4, w_5, x_0, x_1, b_0, b_1, b_2) - e)^2\n    \\\\end{aligned}`,\n\n  netTree: {\n    func: \"x^{3/4}\",\n    nodeId: 0,\n    bpValue: 1,\n    accumulate: powThreeQuarterFunc,\n    children: [\n      {\n        func: \"+\",\n        nodeId: 1,\n        accumulate: addFunc,\n        children: [\n          {\n            func: \"+\",\n            nodeId: 2,\n            accumulate: addFunc,\n            children: [\n              {\n                func: \"\\\\cdot\",\n                nodeId: 3,\n                accumulate: multFunc,\n                children: [\n                  {\n                    func: \"w_4\",\n                    nodeId: 4,\n                    ffValue: 1.4,\n                    accumulate: leafFunc\n                  },\n                  {\n                    func: \"x^{3/4}\",\n                    nodeId: 5,\n                    accumulate: powThreeQuarterFunc,\n                    children: [\n                      {\n                        func: \"+\",\n                        nodeId: 6,\n                        accumulate: addFunc,\n                        children: [\n                          {\n                            func: \"+\",\n                            nodeId: 7,\n                            accumulate: addFunc,\n                            children: [\n                              {\n                                func: \"\\\\cdot\",\n                                nodeId: 8,\n                                accumulate: multFunc,\n                                children: [\n                                  {\n                                    func: \"w_0\",\n                                    nodeId: 9,\n                                    ffValue: 0.4,\n                                    accumulate: leafFunc\n                                  },\n                                  {\n                                    func: \"x_0\",\n                                    nodeId: 10,\n                                    ffValue: 5,\n                                    accumulate: leafFunc\n                                  }\n                                ]\n                              },\n                              {\n                                func: \"\\\\cdot\",\n                                nodeId: 11,\n                                accumulate: multFunc,\n                                children: [\n                                  {\n                                    func: \"w_1\",\n                                    nodeId: 12,\n                                    ffValue: 0.6,\n                                    accumulate: leafFunc\n                                  },\n                                  {\n                                    func: \"x_1\",\n                                    nodeId: 13,\n                                    ffValue: 3,\n                                    accumulate: leafFunc\n                                  }\n                                ]\n                              }\n                            ]\n                          },\n                          {\n                            func: \"b_0\",\n                            nodeId: 14,\n                            ffValue: 0.5,\n                            accumulate: leafFunc\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                func: \"\\\\cdot\",\n                nodeId: 15,\n                accumulate: multFunc,\n                children: [\n                  {\n                    func: \"w_5\",\n                    nodeId: 16,\n                    ffValue: 0.7,\n                    accumulate: leafFunc\n                  },\n                  {\n                    func: \"x^{3/4}\",\n                    nodeId: 17,\n                    accumulate: powThreeQuarterFunc,\n                    children: [\n                      {\n                        func: \"+\",\n                        nodeId: 18,\n                        accumulate: addFunc,\n                        children: [\n                          {\n                            func: \"+\",\n                            nodeId: 19,\n                            accumulate: addFunc,\n                            children: [\n                              {\n                                func: \"\\\\cdot\",\n                                nodeId: 7,\n                                accumulate: multFunc,\n                                children: [\n                                  {\n                                    func: \"w_2\",\n                                    nodeId: 20,\n                                    ffValue: 1.2,\n                                    accumulate: leafFunc\n                                  },\n                                  {\n                                    func: \"x_0\",\n                                    nodeId: 21,\n                                    ffValue: 5,\n                                    accumulate: leafFunc\n                                  }\n                                ]\n                              },\n                              {\n                                func: \"\\\\cdot\",\n                                nodeId: 22,\n                                accumulate: multFunc,\n                                children: [\n                                  {\n                                    func: \"w_3\",\n                                    nodeId: 23,\n                                    ffValue: 0.65,\n                                    accumulate: leafFunc\n                                  },\n                                  {\n                                    func: \"x_1\",\n                                    nodeId: 24,\n                                    ffValue: 3,\n                                    accumulate: leafFunc\n                                  }\n                                ]\n                              }\n                            ]\n                          },\n                          {\n                            func: \"b_1\",\n                            nodeId: 25,\n                            ffValue: 0.5,\n                            accumulate: leafFunc\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          { func: \"b_2\", nodeId: 26, ffValue: 0.5, accumulate: leafFunc }\n        ]\n      }\n    ]\n  }\n};\n\nexport default example;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport VueBackpropagationExercise from \"./components/VueBackpropagationExercise.vue\";\nimport Example from \"./examples/example2\";\n\n@Component({\n  components: {\n    VueBackpropagationExercise\n  }\n})\nexport default class App extends Vue {\n  protected example = Example;\n\n  handleSubmit(values: {\n    [key: string]: number;\n  }): { valid: boolean; message?: string } {\n    console.log(values);\n    return { valid: true };\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=a9dde814&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=sass&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}